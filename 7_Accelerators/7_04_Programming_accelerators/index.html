
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://klust.github.io/SupercomputersForStarters/7_Accelerators/7_04_Programming_accelerators/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.5">
    
    
      
        <title>Accelerator prorgramming - Supercomputers for Starters</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2d9f7617.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="black" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#accelerator-programming" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Supercomputers for Starters" class="md-header__button md-logo" aria-label="Supercomputers for Starters" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Supercomputers for Starters
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Accelerator prorgramming
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="" data-md-color-primary="black" data-md-color-accent=""  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Supercomputers for Starters" class="md-nav__button md-logo" aria-label="Supercomputers for Starters" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Supercomputers for Starters
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../0_00_preliminary/" class="md-nav__link">
        Preliminary words
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../1_Introduction/">Introduction</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Introduction" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Introduction
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_Introduction/1_01_Goals/" class="md-nav__link">
        Goals
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_Introduction/1_02_Why/" class="md-nav__link">
        Why supercomputing?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_Introduction/1_03_What_it_is_not/" class="md-nav__link">
        What it is not
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_Introduction/1_04_Compartmentalised/" class="md-nav__link">
        A compartmentalised supercomputer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../1_Introduction/1_05_Overview/" class="md-nav__link">
        Overview of the notes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../2_Processors/">Processors for supercomputers</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Processors for supercomputers" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Processors for supercomputers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../3_Memory/">The memory hierarchy</a>
          
        </div>
      
      <nav class="md-nav" aria-label="The memory hierarchy" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          The memory hierarchy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../4_Storage/">Storing data on Supercomputers</a>
          
            <label for="__nav_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Storing data on Supercomputers" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Storing data on Supercomputers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../4_Storage/4_01_Introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../4_Storage/4_02_Problems/" class="md-nav__link">
        Problems
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../4_Storage/4_03_Parallel_filesystems/" class="md-nav__link">
        Parallel file systems
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../4_Storage/4_04_Revolution/" class="md-nav__link">
        A storage revolution?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../4_Storage/4_05_To_remember/" class="md-nav__link">
        To remember
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../5_Middleware/">Middleware</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Middleware" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Middleware
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../6_Expectations/">What can we expect?</a>
          
        </div>
      
      <nav class="md-nav" aria-label="What can we expect?" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          What can we expect?
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" checked>
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">Accelerators</a>
          
            <label for="__nav_9">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Accelerators" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Accelerators
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../7_01_What_are_accelerators/" class="md-nav__link">
        What are accelerators?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../7_02_Offloading/" class="md-nav__link">
        Offloading
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../7_03_CPUs_accelerator_features/" class="md-nav__link">
        CPUs with accelerator features
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Accelerator prorgramming
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Accelerator prorgramming
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-current-state" class="md-nav__link">
    The current state
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lower-level-models" class="md-nav__link">
    Lower-level models
  </a>
  
    <nav class="md-nav" aria-label="Lower-level models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuda" class="md-nav__link">
    CUDA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hip" class="md-nav__link">
    HIP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opencl" class="md-nav__link">
    OpenCL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compiler-directives" class="md-nav__link">
    Compiler directives
  </a>
  
    <nav class="md-nav" aria-label="Compiler directives">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#openacc" class="md-nav__link">
    OpenACC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openmp" class="md-nav__link">
    OpenMP
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c-extensions" class="md-nav__link">
    C++ extensions
  </a>
  
    <nav class="md-nav" aria-label="C++ extensions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sycl" class="md-nav__link">
    SYCL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dpc-or-data-parallel-c" class="md-nav__link">
    DPC++ or Data Parallel C++
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#camp" class="md-nav__link">
    C++AMP
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frameworks" class="md-nav__link">
    Frameworks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#libraries" class="md-nav__link">
    Libraries
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../7_05_Status_GPU_computing/" class="md-nav__link">
        Status of GPU computing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../7_06_Further_reading/" class="md-nav__link">
        Further reading
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../8_Conclusions/">Conclusions</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Conclusions" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Conclusions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-current-state" class="md-nav__link">
    The current state
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lower-level-models" class="md-nav__link">
    Lower-level models
  </a>
  
    <nav class="md-nav" aria-label="Lower-level models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuda" class="md-nav__link">
    CUDA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hip" class="md-nav__link">
    HIP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opencl" class="md-nav__link">
    OpenCL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compiler-directives" class="md-nav__link">
    Compiler directives
  </a>
  
    <nav class="md-nav" aria-label="Compiler directives">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#openacc" class="md-nav__link">
    OpenACC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openmp" class="md-nav__link">
    OpenMP
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c-extensions" class="md-nav__link">
    C++ extensions
  </a>
  
    <nav class="md-nav" aria-label="C++ extensions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sycl" class="md-nav__link">
    SYCL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dpc-or-data-parallel-c" class="md-nav__link">
    DPC++ or Data Parallel C++
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#camp" class="md-nav__link">
    C++AMP
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frameworks" class="md-nav__link">
    Frameworks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#libraries" class="md-nav__link">
    Libraries
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="accelerator-programming">Accelerator programming<a class="headerlink" href="#accelerator-programming" title="Permanent link">&para;</a></h1>
<p>We will restrict ourselves to GPGPU programming as these are currently the most
widely used accelerators in supercomputers.</p>
<h2 id="the-current-state">The current state<a class="headerlink" href="#the-current-state" title="Permanent link">&para;</a></h2>
<p>Accelerator programming is, also due to the early stage of the technology, still
a mess, and standardisation still has to set in. This is not uncommon in the world
of supercomputing: The same happened with message passing where there were several
proprietary technologies until the needs were sufficiently well understood to come to
a standardisation.</p>
<p>Currently there are three competing ecosystems growing:</p>
<ol>
<li>
<p>NVIDIA was the first to market with a fairly complete ecosystem for GPGPU
    programming. They chose to make large parts of their technology proprietary
    to create a vendor lock-in and keep hardware prices high.</p>
<p>CUDA is the main NVIDIA ecosystem. NVIDIA together with partners also created
a set of compiler pragma's for C/C++ and Fortran for GPGPU programming with an
open consortium, but many other compiler vendors are hesitant to pick those up.</p>
<p>The NVIDIA toolset also offers some support for open, broadly standardised
technologies, but the support is usually inferior to that for their proprietary
technologies or standards that are in practice largely controlled by them.</p>
</li>
<li>
<p>AMD is a latecomer to the market. Their software stack is called ROCm, and they
    open sourced all components to gain more traction in the market. They basically
    focus on two technologies that we will discuss: HIP and Open MP.</p>
</li>
<li>
<p>Intel calls its ecosystem oneAPI, as it tries to unify CPU and GPGPU programming,
    with libraries that make it easy to switch between a CPU-only version and a 
    GPGPU-accelerated version of an application.</p>
<p>The oneAPI ecosystem is largely based on Data Parallel C++, an extension of SYCL,
and Open MP compiler pragmas. </p>
<p>The oneAPI is partly open-sourced. In some cases, only the API is available and 
vendors should make their own implementation, but, e.g., the sources for their
clang/LLVM based Data Parallel C++ compiler are available to all and this has
been used already to make ports to NVIDIA and AMD GPU hardware.</p>
</li>
</ol>
<h2 id="lower-level-models">Lower-level models<a class="headerlink" href="#lower-level-models" title="Permanent link">&para;</a></h2>
<p>These models use separate code for the host and the accelerator devices that are then
linked together to create the application binary.</p>
<h3 id="cuda">CUDA<a class="headerlink" href="#cuda" title="Permanent link">&para;</a></h3>
<p>CUDA is the best known environment in the HPC world. It is however a proprietary
NVIDIA technology. It is possible to write GPGPU kernels using subsets of C, C++
and Fortran. CUDA also comes with many libraries with optimised routines for 
linear algebra, FFT, neural networks, etc. This makes it by far the most extensive
of the lower-level models. </p>
<p>CUDA, which launched in 2007, has gone through a rapid evolution though it is now
reaching a level of maturity with less frequent major updates.</p>
<h3 id="hip">HIP<a class="headerlink" href="#hip" title="Permanent link">&para;</a></h3>
<p>HIP or <strong>H</strong>eterogeneous Computing <strong>I</strong>nterface for <strong>P</strong>ortability is AMD's 
alternative to CUDA. It tries to be as close as possible as legally possible.
The HIP API maps one-to-one on the CUDA API, making it possible to recompile HIP
code with the CUDA tools using just a header file. In theory this process is
without loss of performance, but there is one caveat: A kernel that is efficient
on an AMD GPU may not be the most efficient option on a NVIDIA GPU as, e.g., the vector
size is different. So careful programming is needed to ensure efficiency on both
platforms.</p>
<p>HIP is purely based on C++ with currently no support for Fortran GPU kernels. 
Feature-wise it is roughly comparable to CUDA 7 or 8, but features that cannot yet
be supported by AMD hardware are missing. The ROCm platform also comes with a lot
of libraries that provide APIs that are also similar to the APIs provided by their CUDA 
counterpart to further ease porting code from the CUDA ecosystem to the AMD ROCm ecosystem.</p>
<p>HIP also comes with two tools that help in reworking CUDA code into HIP code, though 
both typically need some manual intervention.</p>
<h3 id="opencl">OpenCL<a class="headerlink" href="#opencl" title="Permanent link">&para;</a></h3>
<p>OpenCL or Open Compute Language is a framework for heterogeneous computing developed by
the non-prpfit, member-driven technology consortium Khronos Group which manages many
standards for GPU software (including also OpenGL and its offsprings and Vulkan). It
develops vendor-neutral standards.</p>
<p>OpenCL is a C and C++-based technology to develop code that not only runs on GPU accelerators,
but the code can also be recompiled for CPU only, and some DSPs and FPGAs are also supported.
This makes it a very versatile standard and it was for a long time a very attractive standard
for commercial software development. It is by far not as advanced as CUD or not even HIP. 
The evolution of the standard has been very slow lately, with vendors hardly picking up 
many of the features of the 2.x versions. This lead to version 3.0 of the standard that 
defined a clear baseline and made the other features explicitly optional so that programmers
at least know what they can expect. </p>
<p>OpenCL is in principle supported on NVIDIA, AMD and Intel hardware, but the quality of the
implementation is not always spectacular. There are also some open source implementations
with varying hardware support. It has been used in supercomputing software though it was not 
always the only model offered as several packages also contained specialised CUDA code for better 
performance on NVIDIA hardware. The molecular dynamics package GROMACS is one example,
and they will be switching away from OpenCL to newer technologies to support 
non-NVIDIA hardware.</p>
<p>OpenCL is largely superseded by newer technologies developed by the Khronos Group.
Vulkan is their effort to create an API that unifies 3D graphics and computing and is mostly
oriented towards game programming etc., but less towards supercomputing (as several GPUs used
for supercomputing even start omitting graphics-specific circuits) while SYCL, which we will 
discuss later in these notes, is a new initiative for GPGPU programming.</p>
<h2 id="compiler-directives">Compiler directives<a class="headerlink" href="#compiler-directives" title="Permanent link">&para;</a></h2>
<p>In these models, there are no separate sources for the GPU that are compiled with a separate
compiler. Instead, there is a single base of code with compiler directives instructing the
compiler how certain parts of the code can be offloaded to an accelerator. These directives
appear as comments in a Fortran code to compilers that do not support the technology
or use the <code>#pragma</code> directive in C/C++ to make clear that they are directives to compilers
that support those.</p>
<h3 id="openacc">OpenACC<a class="headerlink" href="#openacc" title="Permanent link">&para;</a></h3>
<p>OpenACC was the first successful compiler directive model for GPGPU computing. It supports
C, C++ and Fortran programming.</p>
<p>The first version of standard made its debut at the supercomputing computing conference SC'11
in November 2011. The technology was largely developed by 4 companies: the GPU company NVIDIA,
the compiler company Portland Group which was later renamed PGI and later bought by NVIDIA,
the supercomputer manufacturer Cray which got bought by HPE and largely lost interest in 
OpenACC, now more promoting an alternative, and CAPS Entreprises, a French company and university
spin-off creating tools for accelerator programming that failed in 2013. </p>
<p>The OpenACC standard is currently controlled by the OpenACC Organization, and though it does
count other companies that develop GPUs among its members, it still seems rather dominated by
NVIDIA which may explain why other companies are somewhat hesitant to pick up the standard.
The standard is at the time of writing of this section at version 3.1, released in November 2021,
but is updated almost annually in November.</p>
<p>OpenACC is well supported on NVIDIA hardware through the NVIDIA HPC compilers (which is the 
new name of the PGI compilers adopted after the integration of PGI in NVIDIA). GCC offers some 
support on NVIDIA and some AMD hardware for version 2.6 of the standard (the Nobemver 2017 version) since version 10 of the
GCC compilers., but the evolution is slow and performance is often not that great.
More promising for the future is the work going on in the clang/LLVM community to support
OpenACC, as this effort is largely driven by the USA national labs who want to avoid having
to port all OpenACC-based code developed for the NVIDIA based pre-exascale supercomputers to
other models to run on the new AMD and Intel based exascale supercomputers. In fact,
the clang/LLVM ecosystem is the future for scientific computing and not the GNU Compiler
Collection ecosystem as most compiler vendors already base their compilers on that technology.
The NVIDIA, AMD and new Intel compilers are all based on LLVM and the clang frontend for C and
C++-support, with NVIDIA and AMD still using a Fortran front-end developed by PGI and donated
to the LLVM project while Intel is already experimenting with a new community-developed
more modern front-end for Fortran. OpenACC support in the LLVM ecosystem will build upon the
OpenMP support, the technology that we will discuss next, using extensions for those OpenACC
features that still have no equivalent in OpenMP. Howver, as of version 2015 (summer 2022)
this support is still very incomplete and experimental.</p>
<h3 id="openmp">OpenMP<a class="headerlink" href="#openmp" title="Permanent link">&para;</a></h3>
<p>We've already discussed OpenMP as a technology for shared memory parallelism and for 
vectorisation (the latter since version 4.0 of the standard). But OpenMP is nowadays even 
more versatile. Since version 4.0 of the standard, released in July 2013, there is also
support for offloading to accelerators. That support was greatly improved in 
version 5.0 of the standard which was released at the SC'18 supercomputer conference.
It became a more descriptive and less prescriptive model (offering the compiler enough information
to decide what it should do rather then enforcing the compiler to do something in a particular way),
with the prescriptive nature being critisized a lot by the OpenACC community who claimed superiority
because of this. It also contained much better support for debuggers, performance monitoring tools, etc.</p>
<p>OpenMP has since had minor extensions i the form of version 5.1 at SC'20 and 5.2 at SC'21. The
standard is controlled by a much larger consortium than the OpenACC standard.</p>
<p>OpenMP is an important technology in the AMD ROCm and Intel oneAPI ecosystems. Intel has in fact
supported OpenMP offload to some of its own GPUs for many years, long before establishing the oneAPI
ecosystem. GCC has had some support for OpenMP offload to NVIDIA hardware since version 7 and to 
some AMD hardware since version 10. However, as is the case for OpenACC, it may not be the most
performant option on the market. The clang/LLVM ecosystem is working hard for full support of
the newest OpenMP standards. The AMD and new oneAPI Intel compilers are in fact fully based
on clang and LLVM using some of their own plug-ins to offer additional features, and the NVIDIA 
HPC compiler also largely seems to be based on this technology. NVIDIA and AMD also use the LLVM
backend to compile CUDA and HIP kernels respectively, showing once more that this is the compiler
ecosystem for the future of scientific computing.</p>
<h2 id="c-extensions">C++ extensions<a class="headerlink" href="#c-extensions" title="Permanent link">&para;</a></h2>
<h3 id="sycl">SYCL<a class="headerlink" href="#sycl" title="Permanent link">&para;</a></h3>
<p>SYCL is a programming model based on recent versions of the C++ standard. 
The earlier drafts of the standard go back to the 2014-2015 time frame, but SYCL really took
off with the 2020 version of the standard. SYCL is also a logical successor to OpenCL,
but now making it possible to target CPU, GPU, FPGA and possibly other types of accelerators
from a single code base. Though the programmer is of course free to provide alternative
implementations for different hardware for better performance, it is not needed
by design. SYCL is heavily based on C++ template libraries, but to generate code
for accelerators it still needs a specific compiler.</p>
<p>There are several compilers in developmentwith varying levels of support for
the standard, targeting not only GPUs, but also, e.g., the NEC SX Aurora Tsubasa vector
boards. 
Most if not all of these implemenations are again based on Clang and LLVM.
One implementation worth mentioning is hipSYCL, which as its name suggests
targets hip for the backend and hence can support both AMD and NVIDIA GPUs, but
can also target pure CPU systems and now even contains experimental support for 
Intel GPUs.</p>
<h3 id="dpc-or-data-parallel-c">DPC++ or Data Parallel C++<a class="headerlink" href="#dpc-or-data-parallel-c" title="Permanent link">&para;</a></h3>
<p>Data Parallel C++ is the oneAPI implementation of SYCL. It is basically a project
by Intel to bring SYCL into LLVM, and all code is open sourced. The implementation does
not only cover CPUs and Intel GPUs, but with the help of others (including the 
company Codeplay that has since been acquired by Intel) it also adds support for 
NVIDIA and AMD GPUs and even Intel FPGAs, the latter through a backend based on
OpenCL and SPIR. That support is not included in the binaries that Intel distributes
though.</p>
<p>When DPC++ initially launched, it was really an extension of the then-current SYCL
standard, which is why it gets a separate subsection in these notes. 
However, it is currently promoted as a SYCL 2020 implementation.</p>
<h3 id="camp">C++AMP<a class="headerlink" href="#camp" title="Permanent link">&para;</a></h3>
<p>C++AMP or C++ Accelerated Massive Parallelism is a programming model developed by Microsoft.
It consists of C++ libraries and a minor extension to the language.
There are experimental implementations for non-Microsoft environments, but these are not
really popular and the technology is not really taking off in scientific computing. 
The technology is now deprecated by Microsoft.
Yet we want to mention it in these notes as it was a source of inspiration for
SYCL.</p>
<h2 id="frameworks">Frameworks<a class="headerlink" href="#frameworks" title="Permanent link">&para;</a></h2>
<p>There exist also several C++ frameworks or abstraction libraries that support creating
code that is portable to regular CPUs and GPU systems of various vendors. They let
you exploit all levels of parallelism in a supercomputer except distributed 
computing.</p>
<p><a href="https://kokkos.org/">Kokkos</a> is a framework developed by Sandia National Labs and probably the most popular one
of the frameworks mentioned here. It was first rteleased in 2011 already but grew to a
complete ecosystem with tools to support debuging, profiling and tuning also, and now even
some support for distributed computing also. Kokkos already supports backends for CUDA
and ROCm, and there are experimental backends that can also support the Intel GPUs that will
be used in the Aurora supercomputer.</p>
<p><a href="https://computing.llnl.gov/projects/raja-managing-application-portability-next-generation-platforms">RAJA</a> 
is a framework developed at Lawrence Livermore National Laboratory, based on standard C++11. 
Just as Kokkos, RAJA has several backends supporting SIMD, threading through the TBB library or
OpenMP, but also GPU computing through NVIDIA CUDA, AMD HIP and OpenMP offload, though not all 
back-ends are as mature or support all features.In particular the TBB and OpenMP target offload 
(the latter needed for Intel GPUs) are still experimental at the time this section was
written (October 2022).</p>
<p><a href="https://www.casus.science/research/software-repository/alpaka/">Alpaka</a> 
is a framework developed by CASUS - Center for Advanced Systems Understanding of the 
Helmholtz Zentrum Dresden Rossendorf. Alpaka also supports various backends, including a CUDA
back-end for NVIDIA GPUs. There is also work going on on a HIP backend for AMD GPUs, with
support for Intel GPUs coming through an OpenMP offload backend. </p>
<h2 id="libraries">Libraries<a class="headerlink" href="#libraries" title="Permanent link">&para;</a></h2>
<p>One can often rely on already existing libraries when developing software for GPUs.</p>
<p>NVIDIA CUDA comes with a wide range of libraries.</p>
<p>MAD ROCm provides several libraries that mimic (subsets of) libraries in the CUDA ecosystem,
also easing porting from NVIDIA to AMD hardware.</p>
<p>Intel has adapted several of its CPU librararies to use GPU acceleration also in its oneAPI platform.</p>
<p>However, there are also several vendor-neutral libraries, e.g.,</p>
<ul>
<li>
<p><a href="https://icl.utk.edu/magma/">MAGMA</a> which stands for Matrix Algebra on GPU and Multicore Architectures, which is an early 
    example of such a library.</p>
</li>
<li>
<p><a href="https://icl.utk.edu/fft/">heFFTe</a> is a library for FFT </p>
</li>
</ul>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 11, 2022</span>
      
    
  </small>
</div>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../7_03_CPUs_accelerator_features/" class="md-footer__link md-footer__link--prev" aria-label="Previous: CPUs with accelerator features" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              CPUs with accelerator features
            </div>
          </div>
        </a>
      
      
        
        <a href="../7_05_Status_GPU_computing/" class="md-footer__link md-footer__link--next" aria-label="Next: Status of GPU computing" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Status of GPU computing
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://www.youtube.com/channel/UC3szWMS7glcfWsEZTZXQ1oQ" target="_blank" rel="noopener" title="www.youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.top", "navigation.indexes", "header.autohide", "toc.follow"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.467223ff.min.js"></script>
      
    
  </body>
</html>